<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Content-Centric Networking in Java: org.ccnx.ccn.impl.security.keys.KeyServer Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Content-Centric Networking in Java
   &#160;<span id="projectnumber">0.8.2</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classorg_1_1ccnx_1_1ccn_1_1impl_1_1security_1_1keys_1_1_key_server.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">org.ccnx.ccn.impl.security.keys.KeyServer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="org::ccnx::ccn::impl::security::keys::KeyServer" -->
<p>A small class to handle publishing keys to CCNx, without requiring a repository to be present.  
 <a href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1security_1_1keys_1_1_key_server.html#details">More...</a></p>

<p><a href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1security_1_1keys_1_1_key_server-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1security_1_1keys_1_1_key_server.html#a452b672ae43717ff2871cd0c8bc7053a">KeyServer</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a> handle)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor; uses existing handle.  <a href="#a452b672ae43717ff2871cd0c8bc7053a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a717912b7e48e9ae30670eb52e608c424"></a><!-- doxytag: member="org::ccnx::ccn::impl::security::keys::KeyServer::handle" ref="a717912b7e48e9ae30670eb52e608c424" args="()" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a>&#160;</td><td class="memItemRight" valign="bottom"><b>handle</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a32592b3f01c5e15fc1db9cc9e248228f"></a><!-- doxytag: member="org::ccnx::ccn::impl::security::keys::KeyServer::initialize" ref="a32592b3f01c5e15fc1db9cc9e248228f" args="()" -->
synchronized void&#160;</td><td class="memItemRight" valign="bottom"><b>initialize</b> ()  throws IOException </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab4a1f9b24f3dfe4597cfd25d9922f5a8"></a><!-- doxytag: member="org::ccnx::ccn::impl::security::keys::KeyServer::isInitialized" ref="ab4a1f9b24f3dfe4597cfd25d9922f5a8" args="()" -->
synchronized boolean&#160;</td><td class="memItemRight" valign="bottom"><b>isInitialized</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_public_key_object.html">PublicKeyObject</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1security_1_1keys_1_1_key_server.html#abcc0c70c145055be3ba28450b141264b">serveKey</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> keyName, PublicKey keyToPublish, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_publisher_public_key_digest.html">PublisherPublicKeyDigest</a> signingKeyID, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_key_locator.html">KeyLocator</a> signingKeyLocator)  throws IOException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Start serving signed records for this key.  <a href="#abcc0c70c145055be3ba28450b141264b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1security_1_1keys_1_1_key_server.html#a6b47114205f20315fafb36ac53ee2740">respondToKeyRequests</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> keyPrefix)  throws IOException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle cases where people query us with short prefixes.  <a href="#a6b47114205f20315fafb36ac53ee2740"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a121888c4c4d145b549fc396c4c89cc1e"></a><!-- doxytag: member="org::ccnx::ccn::impl::security::keys::KeyServer::_handle" ref="a121888c4c4d145b549fc396c4c89cc1e" args="" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a>&#160;</td><td class="memItemRight" valign="bottom"><b>_handle</b> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae799f134082e0770667c5286c8b54a39"></a><!-- doxytag: member="org::ccnx::ccn::impl::security::keys::KeyServer::_keyServer" ref="ae799f134082e0770667c5286c8b54a39" args="" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1_c_c_n_flow_server.html">CCNFlowServer</a>&#160;</td><td class="memItemRight" valign="bottom"><b>_keyServer</b> = null</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A small class to handle publishing keys to CCNx, without requiring a repository to be present. </p>
<p>This class publishes our keys, only if someone asks for them. It doesn't make its own handle, unless really asked to. TODO move to use the default handle, which requires making sure that the caller has the opportunity to provide signing key information to us if they don't want to have it pulled from the default handle. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a452b672ae43717ff2871cd0c8bc7053a"></a><!-- doxytag: member="org::ccnx::ccn::impl::security::keys::KeyServer::KeyServer" ref="a452b672ae43717ff2871cd0c8bc7053a" args="(CCNHandle handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1security_1_1keys_1_1_key_server.html#a452b672ae43717ff2871cd0c8bc7053a">org.ccnx.ccn.impl.security.keys.KeyServer.KeyServer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a>&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor; uses existing handle. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a6b47114205f20315fafb36ac53ee2740"></a><!-- doxytag: member="org::ccnx::ccn::impl::security::keys::KeyServer::respondToKeyRequests" ref="a6b47114205f20315fafb36ac53ee2740" args="(ContentName keyPrefix)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1security_1_1keys_1_1_key_server.html#a6b47114205f20315fafb36ac53ee2740">org.ccnx.ccn.impl.security.keys.KeyServer.respondToKeyRequests</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&#160;</td>
          <td class="paramname"><em>keyPrefix</em></td><td>)</td>
          <td>  throws IOException </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Handle cases where people query us with short prefixes. </p>
<p>The flow controller will suppress duplicate or unnecessary registrations. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">keyPrefix</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abcc0c70c145055be3ba28450b141264b"></a><!-- doxytag: member="org::ccnx::ccn::impl::security::keys::KeyServer::serveKey" ref="abcc0c70c145055be3ba28450b141264b" args="(ContentName keyName, PublicKey keyToPublish, PublisherPublicKeyDigest signingKeyID, KeyLocator signingKeyLocator)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_public_key_object.html">PublicKeyObject</a> <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1security_1_1keys_1_1_key_server.html#abcc0c70c145055be3ba28450b141264b">org.ccnx.ccn.impl.security.keys.KeyServer.serveKey</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&#160;</td>
          <td class="paramname"><em>keyName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PublicKey&#160;</td>
          <td class="paramname"><em>keyToPublish</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_publisher_public_key_digest.html">PublisherPublicKeyDigest</a>&#160;</td>
          <td class="paramname"><em>signingKeyID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_key_locator.html">KeyLocator</a>&#160;</td>
          <td class="paramname"><em>signingKeyLocator</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws IOException </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start serving signed records for this key. </p>
<p>We used to check to see if this key was already on the network before publishing it. That was silly -- the interest mechanism would do this for us. Much better way to handle things is to just listen for interests for this key, and only publish it if someone asks (we really want to be the server of last resort, so we should answer late, but don't know how to do that). So we could make an interest handler and then publish the key on first interest (and assume it's cached thereafter?). If the cost of signing is negligible, we can be cheezier. Just publish to our key server, and if someone comes looking, they'll get it. If not....</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">keyName</td><td>the key's content name. Will add a version when saving if it doesn't have one already. If it does have a version, will use that one (see below for effect of version on the key locator). (Note that this is not standard behavior for savable network content, which needs its version explicitly set.) </td></tr>
    <tr><td class="paramname">keyToPublish</td><td>the public key to publish </td></tr>
    <tr><td class="paramname">keyID</td><td>the publisher id </td></tr>
    <tr><td class="paramname">signingKeyID</td><td>the key id of the key pair to sign with </td></tr>
    <tr><td class="paramname">signingKeyLocator</td><td>the key locator to use if we save this key (if it is not already published). If not specified, we look for the default locator for the signing key. If there is none, and we are signing with the same key we are publishing, we build a self-referential key locator, using the name passed in (versioned or not). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the published information about this key </dd></dl>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/main/org/ccnx/ccn/impl/security/keys/KeyServer.java</li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>org</b>      </li>
      <li class="navelem"><b>ccnx</b>      </li>
      <li class="navelem"><b>ccn</b>      </li>
      <li class="navelem"><a class="el" href="namespaceorg_1_1ccnx_1_1ccn_1_1impl.html">impl</a>      </li>
      <li class="navelem"><b>security</b>      </li>
      <li class="navelem"><b>keys</b>      </li>
      <li class="navelem"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1security_1_1keys_1_1_key_server.html">KeyServer</a>      </li>

    <li class="footer">Generated on Tue Apr 1 2014 10:51:28 for Content-Centric Networking in Java by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
