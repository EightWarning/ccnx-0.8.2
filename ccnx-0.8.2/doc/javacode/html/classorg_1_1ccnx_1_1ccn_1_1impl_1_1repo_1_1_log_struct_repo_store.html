<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Content-Centric Networking in Java: org.ccnx.ccn.impl.repo.LogStructRepoStore Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Content-Centric Networking in Java
   &#160;<span id="projectnumber">0.8.2</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pac-attribs">Package Attributes</a>  </div>
  <div class="headertitle">
<div class="title">org.ccnx.ccn.impl.repo.LogStructRepoStore Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="org::ccnx::ccn::impl::repo::LogStructRepoStore" --><!-- doxytag: inherits="org::ccnx::ccn::impl::repo::RepositoryStoreBase,org::ccnx::ccn::impl::repo::RepositoryStore,org::ccnx::ccn::impl::repo::ContentTree::ContentGetter" -->
<p>Implements a log-structured <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html" title="A RepositoryStore stores ContentObjects for later retrieval by Interest and supports enumeration of n...">RepositoryStore</a> on a filesystem using sequential data files with an index for queries.  
 <a href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#details">More...</a></p>

<p><a href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store_1_1_file_ref.html">FileRef</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store_1_1_log_struct_repo_store_profile.html">LogStructRepoStoreProfile</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store_1_1_repo_file.html">RepoFile</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a03ddc2785f8d3b12441224be1baf6e17">getContent</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_interest.html">Interest</a> interest)  throws RepositoryException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets content matching the given interest.  <a href="#a03ddc2785f8d3b12441224be1baf6e17"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a5a5f5b5fb066a101d78da71e1904386d">hasContent</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> name)  throws RepositoryException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for content matching the given name, without retrieving the content itself.  <a href="#a5a5f5b5fb066a101d78da71e1904386d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1nameenum_1_1_name_enumeration_response.html">NameEnumerationResponse</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a43dafe552032d17511f461cbe3e1991f">getNamesWithPrefix</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_interest.html">Interest</a> i, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> responseName)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets all names matching the given NameEnumeration interest.  <a href="#a43dafe552032d17511f461cbe3e1991f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_policy.html">Policy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#ae105945d0a5bafac9a2810eb7a397351">getPolicy</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current policy for this repository.  <a href="#ae105945d0a5bafac9a2810eb7a397351"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">String&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a87467f5647127e2bd473ea2d07fcd885">getVersion</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the current version of this <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html" title="A RepositoryStore stores ContentObjects for later retrieval by Interest and supports enumeration of n...">RepositoryStore</a>.  <a href="#a87467f5647127e2bd473ea2d07fcd885"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#ae73abf0871eb32d2050fa911fe24ecc7">initialize</a> (String repositoryRoot, File policyFile, String localName, String globalPrefix, String namespace, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a> handle)  throws RepositoryException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the repository.  <a href="#ae73abf0871eb32d2050fa911fe24ecc7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a3a11439161025008e9b666586bc00fea">policyUpdate</a> ()  throws RepositoryException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Write/rewrite the policy file if different from what we have now.  <a href="#a3a11439161025008e9b666586bc00fea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1nameenum_1_1_name_enumeration_response.html">NameEnumerationResponse</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#aa94d920b2ae6391af951aa33748e576e">saveContent</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a> content)  throws RepositoryException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the given content in the repository store.  <a href="#aa94d920b2ae6391af951aa33748e576e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#ac04fa7239a128812a62f19020fc55bcf">get</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_content_ref.html">ContentRef</a> ref)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get content for the given reference from the storage files.  <a href="#ac04fa7239a128812a62f19020fc55bcf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a4389adac31c1e202d4960e6f592c6f6d">diagnostic</a> (String name)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Dump all names of data stored in the repository into a special file within the repository on diagnostic request from higher level code.  <a href="#a4389adac31c1e202d4960e6f592c6f6d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad44097baee74dcdf1afee664429013fb"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::shutDown" ref="ad44097baee74dcdf1afee664429013fb" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#ad44097baee74dcdf1afee664429013fb">shutDown</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Cleanup on shutdown. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a17e72e774ffad55ff26e97769389eb23"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::getStatus" ref="a17e72e774ffad55ff26e97769389eb23" args="(String type)" -->
Object&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a17e72e774ffad55ff26e97769389eb23">getStatus</a> (String type)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get implementation defined status. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">synchronized boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a849c732921fb6c2172aded62ffae3480">bulkImport</a> (String name)  throws RepositoryException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Bulk import of data from a file.  <a href="#a849c732921fb6c2172aded62ffae3480"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a85a4d39d327762eed2c1370b45633be8"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::CURRENT_VERSION" ref="a85a4d39d327762eed2c1370b45633be8" args="" -->
static final String&#160;</td><td class="memItemRight" valign="bottom"><b>CURRENT_VERSION</b> = &quot;1.4&quot;</td></tr>
<tr><td colspan="2"><h2><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">Integer&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a024050ab48937a809001710b7d84141d">createIndex</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Read the current repository file(s) for this repository and create an index for them.  <a href="#a024050ab48937a809001710b7d84141d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a533a8fcb2df3d92286422554c6c277ec"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::dumpNames" ref="a533a8fcb2df3d92286422554c6c277ec" args="(int nodelen)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>dumpNames</b> (int nodelen)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a572d8ac867f5e258f6dc48f85b24df93"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_repositoryRoot" ref="a572d8ac867f5e258f6dc48f85b24df93" args="" -->
String&#160;</td><td class="memItemRight" valign="bottom"><b>_repositoryRoot</b> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a08174b6bd0e8e396b1c8df597d1e6670"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_repositoryMeta" ref="a08174b6bd0e8e396b1c8df597d1e6670" args="" -->
String&#160;</td><td class="memItemRight" valign="bottom"><b>_repositoryMeta</b> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a000d181cd074db8c2f29580a5f16269a"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_repositoryFile" ref="a000d181cd074db8c2f29580a5f16269a" args="" -->
File&#160;</td><td class="memItemRight" valign="bottom"><b>_repositoryFile</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abbefe8ae494685e1ddfecaee1854bf72"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_useStoredPolicy" ref="abbefe8ae494685e1ddfecaee1854bf72" args="" -->
boolean&#160;</td><td class="memItemRight" valign="bottom"><b>_useStoredPolicy</b> = true</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8bf6f90621df82b36a48f62fc97f95f7"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_bulkImportInProgress" ref="a8bf6f90621df82b36a48f62fc97f95f7" args="" -->
HashMap&lt; String, String &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>_bulkImportInProgress</b> = new HashMap&lt;String, String&gt;()</td></tr>
<tr><td colspan="2"><h2><a name="pac-attribs"></a>
Package Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a235c2be29afca39dee6b9c5356c4c200"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_files" ref="a235c2be29afca39dee6b9c5356c4c200" args="" -->
Map&lt; Integer, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store_1_1_repo_file.html">RepoFile</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>_files</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a53d8e07aadd5cfa54392b7855e3ec3ba"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_activeWriteFile" ref="a53d8e07aadd5cfa54392b7855e3ec3ba" args="" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store_1_1_repo_file.html">RepoFile</a>&#160;</td><td class="memItemRight" valign="bottom"><b>_activeWriteFile</b> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aafc4294f9226029ed8802c2a608fc916"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_currentFileIndex" ref="aafc4294f9226029ed8802c2a608fc916" args="" -->
Integer&#160;</td><td class="memItemRight" valign="bottom"><b>_currentFileIndex</b> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6826bb170fe63d04d08220703c436d5b"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::_index" ref="a6826bb170fe63d04d08220703c436d5b" args="" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_content_tree.html">ContentTree</a>&#160;</td><td class="memItemRight" valign="bottom"><b>_index</b></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Implements a log-structured <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html" title="A RepositoryStore stores ContentObjects for later retrieval by Interest and supports enumeration of n...">RepositoryStore</a> on a filesystem using sequential data files with an index for queries. </p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a849c732921fb6c2172aded62ffae3480"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::bulkImport" ref="a849c732921fb6c2172aded62ffae3480" args="(String name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">synchronized boolean <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a849c732921fb6c2172aded62ffae3480">org.ccnx.ccn.impl.repo.LogStructRepoStore.bulkImport</a> </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html">RepositoryException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Bulk import of data from a file. </p>
<p>Data must be in a format compatible with the repository store. This would normally mean wire format </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">fileName</td><td>the name of the file to import data from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>false if reexpression for import in progress </dd></dl>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html" title="Exceptions specific to Repositories.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#a9a36ed8305c0dd93e2a14cdf243dc9fc">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div>
<a class="anchor" id="a024050ab48937a809001710b7d84141d"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::createIndex" ref="a024050ab48937a809001710b7d84141d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Integer <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a024050ab48937a809001710b7d84141d">org.ccnx.ccn.impl.repo.LogStructRepoStore.createIndex</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [protected]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read the current repository file(s) for this repository and create an index for them. </p>
<p>WARNING: multiple files are not well tested</p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of files making up the repository </dd></dl>

</div>
</div>
<a class="anchor" id="a4389adac31c1e202d4960e6f592c6f6d"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::diagnostic" ref="a4389adac31c1e202d4960e6f592c6f6d" args="(String name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a4389adac31c1e202d4960e6f592c6f6d">org.ccnx.ccn.impl.repo.LogStructRepoStore.diagnostic</a> </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Dump all names of data stored in the repository into a special file within the repository on diagnostic request from higher level code. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>"nametree" or "nametreewide" to decide whether to limit the printout length of components </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#adc9cd5f317985a00ecd12be44b10ebf8">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div>
<a class="anchor" id="ac04fa7239a128812a62f19020fc55bcf"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::get" ref="ac04fa7239a128812a62f19020fc55bcf" args="(ContentRef ref)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a> <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#ac04fa7239a128812a62f19020fc55bcf">org.ccnx.ccn.impl.repo.LogStructRepoStore.get</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_content_ref.html">ContentRef</a>&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get content for the given reference from the storage files. </p>
<p>Used to retrieve content for comparison operations.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ref</td><td>the reference </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>ContentObject at the referenced slot in the storage files </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_content_tree_1_1_content_getter.html">org.ccnx.ccn.impl.repo.ContentTree.ContentGetter</a>.</p>

</div>
</div>
<a class="anchor" id="a03ddc2785f8d3b12441224be1baf6e17"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::getContent" ref="a03ddc2785f8d3b12441224be1baf6e17" args="(Interest interest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a> <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a03ddc2785f8d3b12441224be1baf6e17">org.ccnx.ccn.impl.repo.LogStructRepoStore.getContent</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_interest.html">Interest</a>&#160;</td>
          <td class="paramname"><em>interest</em></td><td>)</td>
          <td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html">RepositoryException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets content matching the given interest. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">interest</td><td>the given interest </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the closest matching ContentObject or null if no match </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#a9821950da615d36ad24bb3253f4690cc">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div>
<a class="anchor" id="a43dafe552032d17511f461cbe3e1991f"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::getNamesWithPrefix" ref="a43dafe552032d17511f461cbe3e1991f" args="(Interest i, ContentName responseName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1nameenum_1_1_name_enumeration_response.html">NameEnumerationResponse</a> <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a43dafe552032d17511f461cbe3e1991f">org.ccnx.ccn.impl.repo.LogStructRepoStore.getNamesWithPrefix</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_interest.html">Interest</a>&#160;</td>
          <td class="paramname"><em>i</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&#160;</td>
          <td class="paramname"><em>responseName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets all names matching the given NameEnumeration interest. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">i</td><td>the interest </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>the data as a NameEnumerationResponse </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#ad2d083f9f3d38e22eb14841182b40a96">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div>
<a class="anchor" id="ae105945d0a5bafac9a2810eb7a397351"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::getPolicy" ref="ae105945d0a5bafac9a2810eb7a397351" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_policy.html">Policy</a> <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#ae105945d0a5bafac9a2810eb7a397351">org.ccnx.ccn.impl.repo.LogStructRepoStore.getPolicy</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the current policy for this repository. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the policy </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#ab11907eb2cf76555404f3ca9bf7a320e">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div>
<a class="anchor" id="a87467f5647127e2bd473ea2d07fcd885"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::getVersion" ref="a87467f5647127e2bd473ea2d07fcd885" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">String <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a87467f5647127e2bd473ea2d07fcd885">org.ccnx.ccn.impl.repo.LogStructRepoStore.getVersion</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets the current version of this <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html" title="A RepositoryStore stores ContentObjects for later retrieval by Interest and supports enumeration of n...">RepositoryStore</a>. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the version as a String </dd></dl>

<p>Implements <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store_base.html#a302d54621806bc16377e116df36dc787">org.ccnx.ccn.impl.repo.RepositoryStoreBase</a>.</p>

</div>
</div>
<a class="anchor" id="a5a5f5b5fb066a101d78da71e1904386d"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::hasContent" ref="a5a5f5b5fb066a101d78da71e1904386d" args="(ContentName name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a5a5f5b5fb066a101d78da71e1904386d">org.ccnx.ccn.impl.repo.LogStructRepoStore.hasContent</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html">RepositoryException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check for content matching the given name, without retrieving the content itself. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>ContentName to match exactly, including digest as final explicit component </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if there is a ContentObject with exactly the given name, false otherwise </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#a7231bc715b6f5f4b1dfa3034a2178ed1">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div>
<a class="anchor" id="ae73abf0871eb32d2050fa911fe24ecc7"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::initialize" ref="ae73abf0871eb32d2050fa911fe24ecc7" args="(String repositoryRoot, File policyFile, String localName, String globalPrefix, String namespace, CCNHandle handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#ae73abf0871eb32d2050fa911fe24ecc7">org.ccnx.ccn.impl.repo.LogStructRepoStore.initialize</a> </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>repositoryRoot</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">File&#160;</td>
          <td class="paramname"><em>policyFile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>localName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>globalPrefix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>namespace</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a>&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html">RepositoryException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Initialize the repository. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">repositoryRoot</td><td>the directory containing the files to store a repository. A new directory is created if this doesn't yet exist </td></tr>
    <tr><td class="paramname">policyFile</td><td>a file containing policy data to define the initial repository policy (see <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_basic_policy.html" title="A reference implementation of Policy using an XML based policy file.">BasicPolicy</a>) </td></tr>
    <tr><td class="paramname">localName</td><td>the local name for this repository as a slash separated String (defaults if null) </td></tr>
    <tr><td class="paramname">globalPrefix</td><td>the global prefix for this repository as a slash separated String (defaults if null) </td></tr>
    <tr><td class="paramname">An</td><td>initial namespace (defaults to namespace stored in repository, or / if none) </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html" title="Exceptions specific to Repositories.">RepositoryException</a></td><td>if the policyFile, localName, or globalName are improperly formatted </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>optional <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html" title="The core class encapsulating a Java interface to the CCN network.">CCNHandle</a> if caller wants to override the default connection/identity behavior of the repository -- this provides a <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_key_manager.html" title="Top-level interface for managing our own keys, as well as maintaining an address book containing the ...">KeyManager</a> and handle for the repository to use to obtain its keys and communicate with ccnd. If null, the repository will configure its own based on policy, or if none, create one using the executing user's defaults. </td></tr>
  </table>
  </dd>
</dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#a75401f88b3078953f0924effff7f9545">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div>
<a class="anchor" id="a3a11439161025008e9b666586bc00fea"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::policyUpdate" ref="a3a11439161025008e9b666586bc00fea" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#a3a11439161025008e9b666586bc00fea">org.ccnx.ccn.impl.repo.LogStructRepoStore.policyUpdate</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html">RepositoryException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write/rewrite the policy file if different from what we have now. </p>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html" title="Exceptions specific to Repositories.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>
<p>If there are differences we need to write the updated version</p>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#ab37f791cc7078c5d5b472b372c291d5f">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div>
<a class="anchor" id="aa94d920b2ae6391af951aa33748e576e"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::LogStructRepoStore::saveContent" ref="aa94d920b2ae6391af951aa33748e576e" args="(ContentObject content)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1nameenum_1_1_name_enumeration_response.html">NameEnumerationResponse</a> <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html#aa94d920b2ae6391af951aa33748e576e">org.ccnx.ccn.impl.repo.LogStructRepoStore.saveContent</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a>&#160;</td>
          <td class="paramname"><em>content</em></td><td>)</td>
          <td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html">RepositoryException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Save the given content in the repository store. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">content</td><td>the content to save </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html" title="Exceptions specific to Repositories.">RepositoryException</a></td><td>it the content can not be written or encoded </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>NameEnumerationResponse if this satisfies an outstanding NameEnumeration request </dd></dl>

<p>Implements <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html#af31aeb4de6f9b9fd92986355f9ad0e72">org.ccnx.ccn.impl.repo.RepositoryStore</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/main/org/ccnx/ccn/impl/repo/LogStructRepoStore.java</li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>org</b>      </li>
      <li class="navelem"><b>ccnx</b>      </li>
      <li class="navelem"><b>ccn</b>      </li>
      <li class="navelem"><a class="el" href="namespaceorg_1_1ccnx_1_1ccn_1_1impl.html">impl</a>      </li>
      <li class="navelem"><b>repo</b>      </li>
      <li class="navelem"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_log_struct_repo_store.html">LogStructRepoStore</a>      </li>

    <li class="footer">Generated on Tue Apr 1 2014 10:51:28 for Content-Centric Networking in Java by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
