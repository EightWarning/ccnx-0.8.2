<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Content-Centric Networking in Java: org.ccnx.ccn.impl.repo.RepositoryServer Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>


</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Content-Centric Networking in Java
   &#160;<span id="projectnumber">0.8.2</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">org.ccnx.ccn.impl.repo.RepositoryServer Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<!-- doxytag: class="org::ccnx::ccn::impl::repo::RepositoryServer" --><!-- doxytag: inherits="org::ccnx::ccn::impl::CCNStats::CCNStatistics" -->
<p>High level implementation of repository protocol that can be used by any application to provide repository service.  
 <a href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#details">More...</a></p>

<p><a href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><b>InterestTimer</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="enumorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server_1_1_stats_enum.html">StatsEnum</a></td></tr>
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#aa22f89158895674116b554304017b253">RepositoryServer</a> (<a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html">RepositoryStore</a> repo)  throws IOException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#aa22f89158895674116b554304017b253"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afb8284e861eec28e74b8ca97670c7007"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::start" ref="afb8284e861eec28e74b8ca97670c7007" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#afb8284e861eec28e74b8ca97670c7007">start</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Start serving requests from the network. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4a13b21afaf0cb4928416e6a4a911afd"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::waitForStart" ref="a4a13b21afaf0cb4928416e6a4a911afd" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>waitForStart</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa774979825f3fac5c0bd81f32838ac24"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::shutDown" ref="aa774979825f3fac5c0bd81f32838ac24" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#aa774979825f3fac5c0bd81f32838ac24">shutDown</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop serving requests. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#a26185d39de98fa55e562b9e81f4e8812">resetNamespaceFromHandler</a> ()  throws IOException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">In general we need to wait until all sessions are complete before making a namespace change because it involves changing the filter which could cut off current sessions in process.  <a href="#a26185d39de98fa55e562b9e81f4e8812"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a266fb5a4a9ac76727cfc97655e83faaa"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getHandle" ref="a266fb5a4a9ac76727cfc97655e83faaa" args="()" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getHandle</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a64136f40f14096a35a397699b8fc6b34"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getRepository" ref="a64136f40f14096a35a397699b8fc6b34" args="()" -->
<a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html">RepositoryStore</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getRepository</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a92da13e1c23e81135135b588babcbe5c"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getExcludes" ref="a92da13e1c23e81135135b588babcbe5c" args="()" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_exclude.html">Exclude</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getExcludes</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a10dd45700fb6fd5be9073afdca7e4527"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getWriter" ref="a10dd45700fb6fd5be9073afdca7e4527" args="()" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1_c_c_n_writer.html">CCNWriter</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getWriter</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af7c423ebf9f8ebcc8cdcd2187e45864e"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getDataListeners" ref="af7c423ebf9f8ebcc8cdcd2187e45864e" args="()" -->
ArrayList&lt; <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_data_listener.html">RepositoryDataListener</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>getDataListeners</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8bfc009a03936d6d70158548685b6dd4"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::addListener" ref="a8bfc009a03936d6d70158548685b6dd4" args="(RepositoryDataListener listener)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>addListener</b> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_data_listener.html">RepositoryDataListener</a> listener)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac828b61a0012363f38499d2c712f659e"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getPendingNameSpaceState" ref="ac828b61a0012363f38499d2c712f659e" args="()" -->
boolean&#160;</td><td class="memItemRight" valign="bottom"><b>getPendingNameSpaceState</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abcf63b98d926eddf1e6031eb35934679"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getDataHandler" ref="abcf63b98d926eddf1e6031eb35934679" args="()" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_data_handler.html">RepositoryDataHandler</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getDataHandler</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a90bd76637705aac7c68a006c8cfbee8a"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getWindowSize" ref="a90bd76637705aac7c68a006c8cfbee8a" args="()" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>getWindowSize</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab165554e22db0b8a87bc9bbbef3b1a55"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getFreshness" ref="ab165554e22db0b8a87bc9bbbef3b1a55" args="()" -->
int&#160;</td><td class="memItemRight" valign="bottom"><b>getFreshness</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a884812828c23a2ec4d5b02e1a32553cd"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getResponseName" ref="a884812828c23a2ec4d5b02e1a32553cd" args="()" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getResponseName</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#aa02fcf23bf18c75dec07a1db0658e2d4">sendEnumerationResponse</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1nameenum_1_1_name_enumeration_response.html">NameEnumerationResponse</a> ner)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to write out name enumeration responses.  <a href="#aa02fcf23bf18c75dec07a1db0658e2d4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#af5422be10acbe0d56b1ac6a6f8b71630">getKeyTarget</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> target)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Look for unverified keys.  <a href="#af5422be10acbe0d56b1ac6a6f8b71630"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#a5abf001eacd13c9909f1f608c869e301">getKeyTargetFromObject</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a> content, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> target)  throws RepositoryException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Look for keys we don't have based on content object.  <a href="#a5abf001eacd13c9909f1f608c869e301"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#aeafe88737ee686c531d81397fd07820e">getLinkedKeyTarget</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a> co)  throws RepositoryException </td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether co is a link and if so find any unsynced link target which is chained to it.  <a href="#aeafe88737ee686c531d81397fd07820e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a81221d6777e9da33a978edbda5004ed6"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::doSync" ref="a81221d6777e9da33a978edbda5004ed6" args="(Interest interest, Interest readInterest)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>doSync</b> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_interest.html">Interest</a> interest, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_interest.html">Interest</a> readInterest)  throws IOException </td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ade2db41dc893345127e4e1941e0377eb"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getStatus" ref="ade2db41dc893345127e4e1941e0377eb" args="(String type)" -->
Object&#160;</td><td class="memItemRight" valign="bottom"><b>getStatus</b> (String type)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#aa13514a10aa155fe6d45395827e28e47">isDuplicateRequest</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_interest.html">Interest</a> interest)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for duplicate request, i.e.  <a href="#aa13514a10aa155fe6d45395827e28e47"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">boolean&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#a04dc8d19e09176673800efe8b1eb42f3">isWriteSuspended</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_interest.html">Interest</a> interest)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether new writes are allowed now Logs the discarded request if it cannot be processed.  <a href="#a04dc8d19e09176673800efe8b1eb42f3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a88db1f28303df09cf5bea68f2e7286ac"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getThrottle" ref="a88db1f28303df09cf5bea68f2e7286ac" args="()" -->
boolean&#160;</td><td class="memItemRight" valign="bottom"><b>getThrottle</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6d4586791ff74938deacd7939b43446d"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::setThrottle" ref="a6d4586791ff74938deacd7939b43446d" args="(boolean throttle)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><b>setThrottle</b> (boolean throttle)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="acef538b2831195641b6143734177e02c"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getStats" ref="acef538b2831195641b6143734177e02c" args="()" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1_c_c_n_stats.html">CCNStats</a>&#160;</td><td class="memItemRight" valign="bottom"><b>getStats</b> ()</td></tr>
<tr><td colspan="2"><h2><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1a218b3d5514530d91e558c587f09ea6"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::PERIOD" ref="a1a218b3d5514530d91e558c587f09ea6" args="" -->
static final int&#160;</td><td class="memItemRight" valign="bottom"><b>PERIOD</b> = 2000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a335da0bb355bd989ce5212586b4e1083"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::THREAD_LIFE" ref="a335da0bb355bd989ce5212586b4e1083" args="" -->
static final int&#160;</td><td class="memItemRight" valign="bottom"><b>THREAD_LIFE</b> = 8</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a114276e2d19c8c73d7364dbf1ffa7de9"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::FRESHNESS" ref="a114276e2d19c8c73d7364dbf1ffa7de9" args="" -->
static final int&#160;</td><td class="memItemRight" valign="bottom"><b>FRESHNESS</b> = 4</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afd4aa4977a00a1b4ec15f16b6cb76a50"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::_periodicTimer" ref="afd4aa4977a00a1b4ec15f16b6cb76a50" args="" -->
Timer&#160;</td><td class="memItemRight" valign="bottom"><b>_periodicTimer</b> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a253ff4fa74b9b8132befb4a0130841d6"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::_iHandler" ref="a253ff4fa74b9b8132befb4a0130841d6" args="" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_interest_handler.html">RepositoryInterestHandler</a>&#160;</td><td class="memItemRight" valign="bottom"><b>_iHandler</b> = null</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0e6af4fb2dd40a14f36db79c099a2bde"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::_started" ref="a0e6af4fb2dd40a14f36db79c099a2bde" args="" -->
boolean&#160;</td><td class="memItemRight" valign="bottom"><b>_started</b> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a64eedafbc80002064fcc329cdd141348"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::_startedLock" ref="a64eedafbc80002064fcc329cdd141348" args="" -->
Object&#160;</td><td class="memItemRight" valign="bottom"><b>_startedLock</b> = new Object()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a5dd1f98165ec28e98a5cdf5ede330cd7"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::_throttled" ref="a5dd1f98165ec28e98a5cdf5ede330cd7" args="" -->
boolean&#160;</td><td class="memItemRight" valign="bottom"><b>_throttled</b> = false</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab3223a67462056d3ecbf8b85c4d587e1"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::_stats" ref="ab3223a67462056d3ecbf8b85c4d587e1" args="" -->
CCNEnumStats&lt; <a class="el" href="enumorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server_1_1_stats_enum.html">StatsEnum</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>_stats</b> = new CCNEnumStats&lt;<a class="el" href="enumorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server_1_1_stats_enum.html">StatsEnum</a>&gt;(StatsEnum.HandleInterest)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>High level implementation of repository protocol that can be used by any application to provide repository service. </p>
<p>The application must supply a <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html" title="A RepositoryStore stores ContentObjects for later retrieval by Interest and supports enumeration of n...">RepositoryStore</a> instance to take care of actual storage and retrieval, which might use persistent storage or application data structures.</p>
<p>Some notes: We use a policy file to decide which namespaces to save. The policy file is currently parsed within the lower level.</p>
<p>We can't just express an interest in anything that's within the namespaces that we want to save within, because we will keep getting back the same content over and over again if we do that. Instead the clients trigger a write to the repository by expressing an interest in contentName + "write_marker" (CCNBase.REPO_START_WRITE). When we see this we write back some information then express an interest in the contentName without the "write_marker" to get the initial block, then express interest in blocks after the initial block for this particular write. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa22f89158895674116b554304017b253"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::RepositoryServer" ref="aa22f89158895674116b554304017b253" args="(RepositoryStore repo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#aa22f89158895674116b554304017b253">org.ccnx.ccn.impl.repo.RepositoryServer.RepositoryServer</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html">RepositoryStore</a>&#160;</td>
          <td class="paramname"><em>repo</em></td><td>)</td>
          <td>  throws IOException </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. </p>
<p>Note that merely creating an instance does not begin service of requests from the network. For that you must call <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#afb8284e861eec28e74b8ca97670c7007" title="Start serving requests from the network.">start()</a>. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">repo</td><td>the <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html" title="A RepositoryStore stores ContentObjects for later retrieval by Interest and supports enumeration of n...">RepositoryStore</a> instance to use for backing storage. The <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html" title="High level implementation of repository protocol that can be used by any application to provide repos...">RepositoryServer</a> uses repo.getHandle() to get the handle to use for communication, to make sure that it is sending messages under the identity of the repo. </td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="af5422be10acbe0d56b1ac6a6f8b71630"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getKeyTarget" ref="af5422be10acbe0d56b1ac6a6f8b71630" args="(ContentName target)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#af5422be10acbe0d56b1ac6a6f8b71630">org.ccnx.ccn.impl.repo.RepositoryServer.getKeyTarget</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&#160;</td>
          <td class="paramname"><em>target</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Look for unverified keys. </p>
<p>Note that we must have already checked to see that the repo has the content for this target before calling this.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">target</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>new target if we need to verify the target </dd></dl>

</div>
</div>
<a class="anchor" id="a5abf001eacd13c9909f1f608c869e301"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getKeyTargetFromObject" ref="a5abf001eacd13c9909f1f608c869e301" args="(ContentObject content, ContentName target)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#a5abf001eacd13c9909f1f608c869e301">org.ccnx.ccn.impl.repo.RepositoryServer.getKeyTargetFromObject</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a>&#160;</td>
          <td class="paramname"><em>content</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&#160;</td>
          <td class="paramname"><em>target</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html">RepositoryException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Look for keys we don't have based on content object. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">content</td><td></td></tr>
    <tr><td class="paramname">target</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html" title="Exceptions specific to Repositories.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aeafe88737ee686c531d81397fd07820e"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getLinkedKeyTarget" ref="aeafe88737ee686c531d81397fd07820e" args="(ContentObject co)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#aeafe88737ee686c531d81397fd07820e">org.ccnx.ccn.impl.repo.RepositoryServer.getLinkedKeyTarget</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a>&#160;</td>
          <td class="paramname"><em>co</em></td><td>)</td>
          <td>  throws <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html">RepositoryException</a> </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check whether co is a link and if so find any unsynced link target which is chained to it. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">co</td><td>the ContentObject to test </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>null if no unresolved target, ContentName of unresolved target otherwise </dd></dl>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_exception.html" title="Exceptions specific to Repositories.">RepositoryException</a></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa13514a10aa155fe6d45395827e28e47"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::isDuplicateRequest" ref="aa13514a10aa155fe6d45395827e28e47" args="(Interest interest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#aa13514a10aa155fe6d45395827e28e47">org.ccnx.ccn.impl.repo.RepositoryServer.isDuplicateRequest</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_interest.html">Interest</a>&#160;</td>
          <td class="paramname"><em>interest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check for duplicate request, i.e. </p>
<p>request already in process Logs the request if found to be a duplicate. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">interest</td><td>the incoming interest containing the request command </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if request is duplicate </dd></dl>

</div>
</div>
<a class="anchor" id="a04dc8d19e09176673800efe8b1eb42f3"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::isWriteSuspended" ref="a04dc8d19e09176673800efe8b1eb42f3" args="(Interest interest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">boolean <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#a04dc8d19e09176673800efe8b1eb42f3">org.ccnx.ccn.impl.repo.RepositoryServer.isWriteSuspended</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_interest.html">Interest</a>&#160;</td>
          <td class="paramname"><em>interest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Check whether new writes are allowed now Logs the discarded request if it cannot be processed. </p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">interest</td><td>the incoming interest containing the command </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if writes are presently suspended </dd></dl>

</div>
</div>
<a class="anchor" id="a26185d39de98fa55e562b9e81f4e8812"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::resetNamespaceFromHandler" ref="a26185d39de98fa55e562b9e81f4e8812" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#a26185d39de98fa55e562b9e81f4e8812">org.ccnx.ccn.impl.repo.RepositoryServer.resetNamespaceFromHandler</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>  throws IOException </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>In general we need to wait until all sessions are complete before making a namespace change because it involves changing the filter which could cut off current sessions in process. </p>
<dl class="exception"><dt><b>Exceptions:</b></dt><dd>
  <table class="exception">
    <tr><td class="paramname">IOException</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa02fcf23bf18c75dec07a1db0658e2d4"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::sendEnumerationResponse" ref="aa02fcf23bf18c75dec07a1db0658e2d4" args="(NameEnumerationResponse ner)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#aa02fcf23bf18c75dec07a1db0658e2d4">org.ccnx.ccn.impl.repo.RepositoryServer.sendEnumerationResponse</a> </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1nameenum_1_1_name_enumeration_response.html">NameEnumerationResponse</a>&#160;</td>
          <td class="paramname"><em>ner</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Method to write out name enumeration responses. </p>
<p>This is called directly to respond to incoming name enumeration interests and can also be called when a content object is saved in the repo and the interest flag is set by a previous name enumeration interest where there was not new information available.</p>
<dl class="params"><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ner</td><td>NameEnumerationResponse object to send out</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>void </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/main/org/ccnx/ccn/impl/repo/RepositoryServer.java</li>
</ul>
</div><!-- contents -->
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><b>org</b>      </li>
      <li class="navelem"><b>ccnx</b>      </li>
      <li class="navelem"><b>ccn</b>      </li>
      <li class="navelem"><a class="el" href="namespaceorg_1_1ccnx_1_1ccn_1_1impl.html">impl</a>      </li>
      <li class="navelem"><b>repo</b>      </li>
      <li class="navelem"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html">RepositoryServer</a>      </li>

    <li class="footer">Generated on Tue Apr 1 2014 10:51:28 for Content-Centric Networking in Java by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.6.1 </li>
   </ul>
 </div>


</body>
</html>
